<head>
<style>
body {
  margin: 0px;
  padding: 0px;
}
</style>

<script>
function generate_links() {
  var zoom_default = 16;
  var coordinates = null;
  chrome.tabs.getSelected(null, function(tab) {
      chrome.tabs.sendRequest(tab.id, {}, function(coordinates_pair) {
          coordinates = coordinates_pair;
          if (coordinates == null){
              document.writeln('no coordinates detected, browse around');
          }
          if (!(coordinates==null)){
              if (coordinates['zoom'])
                var zoom = coordinates['zoom'];
              else
                var zoom = zoom_default;
              var link_wikimapia = '<a href="http://wikimapia.org/#lat=LAT&lon=LON&z=ZOOM&l=0&m=b" target="_blank">Wikimapia</a>';
              var link_osm = '<a href="http://www.openstreetmap.org/?lon=LON&lat=LAT&zoom=ZOOM&mlat=LAT&mlon=LON" target="_blank">OpenStreetMap</a>';
              var link_google ='<a href="http://maps.google.com/?ie=UTF8&ll=LAT,LON&z=ZOOM" target="_blank">Google Maps</a>';
              var link_mapquest = '<a href="http://open.mapquest.com/?center=LAT,LON&zoom=ZOOM" target="_blank">MapQuest Open</a>';
              link_wikimapia = link_wikimapia.replace('LAT',coordinates['lat']);
              link_wikimapia = link_wikimapia.replace('LON',coordinates['lon']);
              link_wikimapia = link_wikimapia.replace('ZOOM',zoom);
              link_osm = link_osm.replace(/LAT/g,coordinates['lat']);
              link_osm = link_osm.replace(/LON/g,coordinates['lon']);
              link_osm = link_osm.replace('ZOOM',zoom);
              link_google = link_google.replace(/LAT/g,coordinates['lat']);
              link_google = link_google.replace(/LON/g,coordinates['lon']);
              link_google = link_google.replace('ZOOM',zoom);
              link_mapquest = link_mapquest.replace(/LAT/g,coordinates['lat']);
              link_mapquest = link_mapquest.replace(/LON/g,coordinates['lon']);
              link_mapquest = link_mapquest.replace('ZOOM',zoom-2);
              document.writeln(link_wikimapia);
              document.writeln('<br/>');
              document.writeln(link_osm);
              document.writeln('<br/>');
              document.writeln(link_google);
              document.writeln('<br/>');
              document.writeln(link_mapquest);
          }
      });
  });
};
</script>


</head>
<body onload="generate_links();">
</body>

